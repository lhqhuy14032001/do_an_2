<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý đơn hàng</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<link rel="stylesheet" href="/css/admin/style.css">

<body>
<section id="header">
    <%- include('../header.ejs') %>
</section>
<div class="container my-3 pt-5">
    <section class=" mt-3">
        <h1>Danh sách đơn hàng</h1>
        <table id="order-list" class=" table table-striped">
            <thead>
            <tr>
                <th>Mã đơn</th>
                <th>Ngày tạo</th>
                <th>Tổng tiền</th>
                <th>Tên khách hàng</th>
                <th>Số điện thoại</th>
                <th>Trạng thái thanh toán</th>
                <th>Chức năng</th>
            </tr>
            </thead>
            <tbody class="order-list">
            <% if (orderList.length > 0) { %>
                <% orderList.forEach((order, index) => { %>
                    <tr>
                        <td class="id-order">
                            <%= order.id_bill %>
                        </td>
                        <td class="custom-date">
                            <p class="date"><%= order.dateOrder %></p>
                        </td>
                        <td>
                            <%= new Intl.NumberFormat().format(order.total) %>
                        </td>
                        <td>
                            <%= order.customer_name %>
                        </td>
                        <td>
                            <%= order.customer_phonenumber %>
                        </td>
                        <td>
                            <%= order.payment_status ? 'ĐÃ THANH TOÁN' : 'CHƯA THANH TOÁN' %>
                        </td>
                        <td>

                            <% if (!order.payment_status){ %>
                                <a href="/admin/pay/<%= order.id_bill %>"
                                   class="btn-pay btn btn-primary">Thanh toán</a>
                            <% } else { %>
                                <p></p>
                            <% } %>
                            <a href="/admin/detail-order/<%= order.id_bill %>" class="btn-edit btn btn-warning">Chi
                                tiết</a>
                            <a href="/admin/delete-order/<%= order.id_bill %>"
                               class="first btn-delete first btn btn-danger">
                                Xoá
                            </a>
                        </td>
                    </tr>
                <% }); %>
            <% } %>
            </tbody>
        </table>
    </section>
    <div class="col-12">
        <div class="row">
            <button class="<%= isShowViewmore ? 'd-block ' : 'd-none ' %> btn-viewmore btn btn-success offset-4 col-3">
                Xem thêm
            </button>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script src="/js/admin/orderManage.js"></script>
</body>

</html>